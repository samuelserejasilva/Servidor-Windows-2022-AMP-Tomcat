# ğŸŒ Status TÃ©cnico â€“ IIS + PHP (FastCGI)

**Ãšltima atualizaÃ§Ã£o:** 29/08/2025  
**ResponsÃ¡vel:** Samuel Cereja  
**Servidor:** Windows Server 2022 Datacenter  

---

## ğŸ”§ ConfiguraÃ§Ã£o do IIS
- IIS 10 instalado e ativo âœ…
- ARR + URL Rewrite habilitados âœ…
- Sites configurados:
  - Portal Auditoria (pÃ¡ginas AMP + proxy para Tomcat)
  - Webmail (Roundcube em `/webmail`) âœ…
- Regras de URL Rewrite:
  - Proxy IIS â†’ Tomcat (`/app/*` e `/api/*`) âœ…
  - Bypass `/webmail` âœ…
  - Redirect **www â†’ nÃ£o-www** âœ…
- HTTPS habilitado em todos os bindings (SSL/TLS vÃ¡lido via Win-ACME) âœ…

---

## ğŸ”§ ConfiguraÃ§Ã£o do PHP
- VersÃ£o instalada: **PHP 8.4 (x64)** âœ…
- Modo de execuÃ§Ã£o: **CGI/FastCGI** (`C:\php\php-cgi.exe`) âœ…
- ConfiguraÃ§Ã£o FastCGI no IIS:
  - `PHPRC = C:\php\`
  - `PHP_FCGI_MAX_REQUESTS = 10000`
- `php.ini` revisado com:
  - ExtensÃµes ativas: `mbstring`, `imap`, `openssl`, `intl`, `pdo_mysql`, `mysqli`, `fileinfo`, `curl`, `zip` âœ…
  - Diretivas de seguranÃ§a: `expose_php=Off`, `display_errors=Off`, `log_errors=On` âœ…
  - SessÃµes seguras: `session.cookie_secure=1`, `session.cookie_httponly=1` âœ…
  - Upload configurado: `upload_max_filesize=20M`, `post_max_size=25M` âœ…
- `phpinfo()` validado â€” carregando `php.ini` correto âœ…

---

## ğŸ”’ SeguranÃ§a
- Certificados SSL/TLS aplicados no IIS âœ…
- HSTS configurado (`Strict-Transport-Security`) âœ…
- CabeÃ§alhos adicionais:
  - `X-Content-Type-Options: nosniff`
  - `Referrer-Policy: no-referrer-when-downgrade`
- Directory browsing desabilitado âœ…

---

## ğŸ“Š ObservaÃ§Ãµes
- PHP estÃ¡ rodando de forma estÃ¡vel no IIS com Roundcube.  
- Logs de erro em `C:\inetpub\logs\php\php_errors.log`.  
- PrÃ³ximos passos: monitorar consumo de memÃ³ria e validar desempenho em produÃ§Ã£o com AMP + Roundcube.
